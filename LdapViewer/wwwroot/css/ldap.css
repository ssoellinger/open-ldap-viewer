/* LDAP Browser Layout */
.ldap-browser {
    display: flex;
    height: calc(100vh - 56px); /* subtract navbar height */
}

.ldap-tree-panel {
    width: 350px;
    min-width: 250px;
    border-right: 1px solid #dee2e6;
    display: flex;
    flex-direction: column;
    background: #f8f9fa;
}

.panel-header {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #dee2e6;
    background: #e9ecef;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.panel-toolbar {
    padding: 0.4rem 0.5rem;
    border-bottom: 1px solid #dee2e6;
    background: #f0f0f0;
}

.tree-content {
    overflow-y: auto;
    flex: 1;
    padding: 0.5rem;
}

.ldap-detail-panel {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}

.ldap-detail-panel > :not(.search-bar):not(.search-results-panel) {
    padding: 1rem;
}

/* Tree Node Styles */
.tree-node {
    user-select: none;
}

.tree-node-row {
    display: flex;
    align-items: center;
    padding: 0.2rem 0.4rem;
    cursor: pointer;
    border-radius: 3px;
    white-space: nowrap;
}

.tree-node-row:hover {
    background-color: #e2e6ea;
}

.tree-node-row.selected {
    background-color: #0d6efd;
    color: white;
}

.tree-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.2rem;
    height: 1.2rem;
    font-size: 0.8rem;
    cursor: pointer;
    flex-shrink: 0;
}

.tree-toggle-placeholder {
    display: inline-block;
    width: 1.2rem;
    flex-shrink: 0;
}

.tree-label {
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 0.9rem;
}

.tree-children {
    padding-left: 1.2rem;
}

.tree-loading {
    padding: 0.3rem 0.5rem;
    font-size: 0.8rem;
    color: #6c757d;
}

.tree-empty {
    padding: 0.3rem 0.5rem;
    font-size: 0.8rem;
    color: #6c757d;
    font-style: italic;
}

/* Search Styles */
.search-bar {
    padding: 0.5rem;
    border-bottom: 1px solid #dee2e6;
    background: #f8f9fa;
    flex-shrink: 0;
}

.search-results-panel {
    display: flex;
    flex: 1;
    overflow: hidden;
}

.search-results-list {
    width: 280px;
    min-width: 200px;
    overflow-y: auto;
    border-right: 1px solid #dee2e6;
    background: #f8f9fa;
}

.search-detail {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
}

.search-result-item {
    padding: 0.4rem 0.6rem;
    cursor: pointer;
    border-bottom: 1px solid #eee;
}

.search-result-item:hover {
    background: #e2e6ea;
}

.search-result-item.active {
    background: #0d6efd;
    color: white;
}

.search-result-dn {
    font-family: monospace;
    font-size: 0.7rem;
    color: #6c757d;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.search-result-item.active .search-result-dn {
    color: rgba(255, 255, 255, 0.8);
}

/* Entry Detail Styles */
.entry-detail {
    max-width: 100%;
}

.entry-dn {
    word-break: break-all;
    font-family: monospace;
    font-size: 0.95rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #dee2e6;
    margin-bottom: 1rem;
}

.attr-name {
    font-family: monospace;
    font-weight: 600;
    font-size: 0.85rem;
    vertical-align: top;
}

.attr-value {
    word-break: break-all;
    font-size: 0.85rem;
}

.attr-value-text {
    cursor: pointer;
    border-radius: 2px;
    padding: 0 2px;
}

.attr-value-text:hover {
    background-color: #e2e6ea;
}

/* Tree Child Count */
.tree-child-count {
    font-size: 0.75rem;
    color: #6c757d;
    margin-left: 0.3rem;
}

.tree-node-row.selected .tree-child-count {
    color: rgba(255, 255, 255, 0.7);
}

/* Bookmark Styles */
.bookmark-panel {
    border-bottom: 1px solid #dee2e6;
    background: #fff8e1;
}

.bookmark-header {
    border-bottom: 1px solid #f0e6c0;
    background: #fff3cd;
}

.bookmark-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.2rem 0.5rem;
    cursor: pointer;
    font-size: 0.85rem;
    border-bottom: 1px solid #f0e6c0;
}

.bookmark-item:hover {
    background: #fff0b3;
}

.bookmark-item.active {
    background: #0d6efd;
    color: white;
}

.bookmark-label {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
}

.bookmark-remove {
    color: #dc3545;
    font-size: 0.75rem;
    text-decoration: none;
    flex-shrink: 0;
}

.bookmark-item.active .bookmark-remove {
    color: rgba(255, 255, 255, 0.8);
}

/* Schema Browser Styles */
.schema-list {
    max-height: 50vh;
    overflow-y: auto;
    border: 1px solid #dee2e6;
    border-radius: 4px;
}

.schema-item {
    padding: 0.4rem 0.6rem;
    border-bottom: 1px solid #eee;
    cursor: pointer;
}

.schema-item:hover {
    background: #e2e6ea;
}

.schema-item.active {
    background: #0d6efd;
    color: white;
}

.schema-item.active .text-muted {
    color: rgba(255, 255, 255, 0.7) !important;
}

/* DN Breadcrumb */
.dn-breadcrumb {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.2rem;
    font-family: monospace;
    font-size: 0.9rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #dee2e6;
    margin-bottom: 1rem;
}

.dn-breadcrumb-segment {
    cursor: pointer;
    padding: 0.1rem 0.3rem;
    border-radius: 3px;
    color: #0d6efd;
    text-decoration: none;
}

.dn-breadcrumb-segment:hover {
    background: #e2e6ea;
    text-decoration: underline;
}

.dn-breadcrumb-separator {
    color: #6c757d;
    font-size: 0.8rem;
}

/* Search History */
.search-history-dropdown {
    position: relative;
}

.search-history-list {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 0 0 4px 4px;
    max-height: 200px;
    overflow-y: auto;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.search-history-item {
    padding: 0.3rem 0.6rem;
    cursor: pointer;
    font-size: 0.85rem;
    border-bottom: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.search-history-item:hover {
    background: #e2e6ea;
}

.search-history-item .badge {
    font-size: 0.7rem;
}

/* Member Link Styles */
.member-link {
    color: #0d6efd;
    cursor: pointer;
    text-decoration: none;
}

.member-link:hover {
    text-decoration: underline;
}

/* Dark Mode Toggle */
.dark-mode-toggle {
    background: none;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85rem;
}

.dark-mode-toggle:hover {
    border-color: rgba(255, 255, 255, 0.6);
    background: rgba(255, 255, 255, 0.1);
}

#dark-mode-btn::after {
    content: "Dunkelmodus";
}

[data-theme="dark"] #dark-mode-btn::after {
    content: "Hellmodus";
}

/* ==================== DARK MODE ==================== */
[data-theme="dark"] body,
[data-theme="dark"] {
    background-color: #1a1a2e;
    color: #e0e0e0;
}

[data-theme="dark"] .page {
    background-color: #1a1a2e;
}

[data-theme="dark"] main {
    background-color: #1a1a2e;
}

[data-theme="dark"] .card {
    background-color: #16213e;
    border-color: #0f3460;
    color: #e0e0e0;
}

[data-theme="dark"] .card-header {
    background-color: #0f3460;
    border-color: #0f3460;
    color: #e0e0e0;
}

[data-theme="dark"] .list-group-item {
    background-color: #16213e;
    border-color: #0f3460;
    color: #e0e0e0;
}

[data-theme="dark"] .form-control,
[data-theme="dark"] .form-select {
    background-color: #0d1b3e;
    border-color: #0f3460;
    color: #e0e0e0;
}

[data-theme="dark"] .form-control::placeholder {
    color: #6c757d;
}

[data-theme="dark"] .form-control:focus,
[data-theme="dark"] .form-select:focus {
    background-color: #0d1b3e;
    border-color: #3a86ff;
    color: #e0e0e0;
}

[data-theme="dark"] .table {
    color: #e0e0e0;
}

[data-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) > * {
    background-color: #16213e;
    color: #e0e0e0;
}

[data-theme="dark"] .table-striped > tbody > tr:nth-of-type(even) > * {
    background-color: #1a2744;
    color: #e0e0e0;
}

[data-theme="dark"] .table > :not(caption) > * > * {
    border-bottom-color: #0f3460;
}

[data-theme="dark"] thead {
    background-color: #0f3460;
    color: #e0e0e0;
}

[data-theme="dark"] .alert-warning {
    background-color: #332d00;
    border-color: #665a00;
    color: #ffc107;
}

[data-theme="dark"] .alert-danger {
    background-color: #3d0000;
    border-color: #660000;
    color: #ff6b6b;
}

[data-theme="dark"] .alert-success {
    background-color: #003d00;
    border-color: #006600;
    color: #6bff6b;
}

[data-theme="dark"] .alert-info {
    background-color: #002233;
    border-color: #004466;
    color: #6bddff;
}

[data-theme="dark"] .text-muted {
    color: #8a8a9a !important;
}

[data-theme="dark"] .container {
    color: #e0e0e0;
}

/* Dark Mode - LDAP Browser */
[data-theme="dark"] .ldap-tree-panel {
    background: #16213e;
    border-color: #0f3460;
}

[data-theme="dark"] .panel-header {
    background: #0f3460;
    border-color: #0f3460;
    color: #e0e0e0;
}

[data-theme="dark"] .panel-toolbar {
    background: #162340;
    border-color: #0f3460;
}

[data-theme="dark"] .tree-node-row:hover {
    background-color: #1a3060;
}

[data-theme="dark"] .tree-loading,
[data-theme="dark"] .tree-empty {
    color: #8a8a9a;
}

[data-theme="dark"] .tree-child-count {
    color: #8a8a9a;
}

[data-theme="dark"] .search-bar {
    background: #16213e;
    border-color: #0f3460;
}

[data-theme="dark"] .search-results-list {
    background: #16213e;
    border-color: #0f3460;
}

[data-theme="dark"] .search-result-item {
    border-color: #0f3460;
}

[data-theme="dark"] .search-result-item:hover {
    background: #1a3060;
}

[data-theme="dark"] .search-result-dn {
    color: #8a8a9a;
}

[data-theme="dark"] .search-detail {
    background: #1a1a2e;
}

/* Dark Mode - Bookmarks */
[data-theme="dark"] .bookmark-panel {
    background: #1a2744;
    border-color: #0f3460;
}

[data-theme="dark"] .bookmark-header {
    background: #1e3050;
    border-color: #0f3460;
}

[data-theme="dark"] .bookmark-item {
    border-color: #0f3460;
}

[data-theme="dark"] .bookmark-item:hover {
    background: #253d60;
}

/* Dark Mode - Entry Detail */
[data-theme="dark"] .entry-dn,
[data-theme="dark"] .dn-breadcrumb {
    border-color: #0f3460;
}

[data-theme="dark"] .attr-value-text:hover {
    background-color: #1a3060;
}

/* Dark Mode - Schema */
[data-theme="dark"] .schema-list {
    border-color: #0f3460;
}

[data-theme="dark"] .schema-item {
    border-color: #0f3460;
}

[data-theme="dark"] .schema-item:hover {
    background: #1a3060;
}

/* Dark Mode - Search History */
[data-theme="dark"] .search-history-list {
    background: #16213e;
    border-color: #0f3460;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .search-history-item {
    border-color: #0f3460;
}

[data-theme="dark"] .search-history-item:hover {
    background: #1a3060;
}

/* Dark Mode - Tables (general, non-striped) */
[data-theme="dark"] .table > tbody > tr > td,
[data-theme="dark"] .table > tbody > tr > th {
    background-color: #16213e;
    color: #e0e0e0;
    border-bottom-color: #0f3460;
}

[data-theme="dark"] .table > thead > tr > th {
    background-color: #0f3460;
    color: #e0e0e0;
    border-bottom-color: #0f3460;
}

[data-theme="dark"] .card-body {
    background-color: #16213e;
}

/* Dark Mode - Progress bars */
[data-theme="dark"] .progress {
    background-color: #0d1b3e;
}

/* Dark Mode - Breadcrumb */
[data-theme="dark"] .dn-breadcrumb-segment:hover {
    background: #1a3060;
}

[data-theme="dark"] .dn-breadcrumb-separator {
    color: #8a8a9a;
}

/* Dark Mode - Form check */
[data-theme="dark"] .form-check-label {
    color: #e0e0e0;
}

/* ==================== CONNECTION TABS ==================== */
.connection-tabs {
    display: flex;
    background: #e9ecef;
    border-bottom: 1px solid #dee2e6;
    padding: 0.3rem 0.5rem 0;
    gap: 2px;
    flex-shrink: 0;
}

.connection-tab {
    display: flex;
    align-items: center;
    gap: 0.3rem;
    padding: 0.4rem 0.8rem;
    border: 1px solid #dee2e6;
    border-bottom: none;
    border-radius: 6px 6px 0 0;
    background: #f8f9fa;
    cursor: pointer;
    font-size: 0.85rem;
    white-space: nowrap;
}

.connection-tab:hover {
    background: #fff;
}

.connection-tab.active {
    background: #fff;
    border-bottom: 1px solid #fff;
    margin-bottom: -1px;
    font-weight: 600;
}

.connection-tab-label {
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
}

.connection-tab-close {
    background: none;
    border: none;
    color: #6c757d;
    font-size: 0.75rem;
    cursor: pointer;
    padding: 0 0.2rem;
    line-height: 1;
}

.connection-tab-close:hover {
    color: #dc3545;
}

.connection-tab-add {
    font-weight: bold;
    font-size: 1rem;
    color: #6c757d;
    padding: 0.3rem 0.6rem;
}

.connection-tab-add:hover {
    color: #0d6efd;
}

/* ==================== EDIT MODE ==================== */
.edit-table .edit-value-row {
    display: flex;
    gap: 0.3rem;
    margin-bottom: 0.25rem;
    align-items: center;
}

.edit-input {
    flex: 1;
}

.edit-remove-btn {
    flex-shrink: 0;
    padding: 0.1rem 0.4rem;
    font-size: 0.75rem;
}

.edit-add-value-btn {
    font-size: 0.75rem;
    padding: 0.1rem 0.5rem;
    margin-top: 0.2rem;
}

.edit-new-attribute {
    padding: 0.75rem;
    margin-top: 0.5rem;
    background: #f0f8ff;
    border: 1px dashed #b8daff;
    border-radius: 4px;
}

/* ==================== COMPARE PAGE ==================== */
.compare-table {
    table-layout: fixed;
}

.compare-cell {
    font-size: 0.8rem;
    word-break: break-all;
}

.compare-table > tbody > tr.compare-only-left > td,
.compare-table > tbody > tr.compare-only-right > td {
    background-color: #d4edda !important;
    color: #155724;
}

.compare-table > tbody > tr.compare-diff > td {
    background-color: #fff3cd !important;
    color: #856404;
}

.compare-legend {
    display: inline-block;
    width: 14px;
    height: 14px;
    border-radius: 2px;
    vertical-align: middle;
    margin-right: 0.3rem;
}

.compare-legend-only {
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
}

.compare-legend-diff {
    background-color: #fff3cd;
    border: 1px solid #ffeeba;
}

.compare-legend-same {
    background-color: #fff;
    border: 1px solid #dee2e6;
}

/* ==================== LDIF IMPORT ==================== */
.ldif-textarea {
    font-family: monospace;
    font-size: 0.85rem;
    resize: vertical;
}

/* ==================== ATTRIBUTE AUTOCOMPLETE ==================== */
.attr-autocomplete {
    position: relative;
}

.attr-suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1050;
    background: #fff;
    border: 1px solid #dee2e6;
    border-top: none;
    border-radius: 0 0 4px 4px;
    max-height: 220px;
    overflow-y: auto;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
}

.attr-suggestion-item {
    padding: 0.3rem 0.6rem;
    cursor: pointer;
    font-size: 0.82rem;
    font-family: monospace;
    border-bottom: 1px solid #f0f0f0;
}

.attr-suggestion-item:hover,
.attr-suggestion-item.selected {
    background: #e2e6ea;
}

.attr-suggestion-item strong {
    color: #0d6efd;
}

/* ==================== ENTRY EDITOR ==================== */
.entry-editor {
    border-bottom: 2px solid #dee2e6;
}

.editor-attr-label {
    display: inline-block;
    width: 40%;
    min-width: 120px;
    font-family: monospace;
    font-size: 0.85rem;
    font-weight: 600;
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    flex-shrink: 0;
}

.editor-attr-required {
    background-color: #fff3cd;
    border: 1px solid #ffc107;
    color: #856404;
}

/* ==================== DARK MODE - New Features ==================== */

/* Dark Mode - Connection Tabs */
[data-theme="dark"] .connection-tabs {
    background: #0f3460;
    border-color: #0f3460;
}

[data-theme="dark"] .connection-tab {
    background: #16213e;
    border-color: #0f3460;
    color: #e0e0e0;
}

[data-theme="dark"] .connection-tab:hover {
    background: #1a2744;
}

[data-theme="dark"] .connection-tab.active {
    background: #1a1a2e;
    border-bottom-color: #1a1a2e;
}

[data-theme="dark"] .connection-tab-close:hover {
    color: #ff6b6b;
}

[data-theme="dark"] .connection-tab-add:hover {
    color: #3a86ff;
}

/* Dark Mode - Edit Mode */
[data-theme="dark"] .edit-new-attribute {
    background: #1a2744;
    border-color: #0f3460;
}

/* Dark Mode - Compare */
[data-theme="dark"] .compare-table > tbody > tr.compare-only-left > td,
[data-theme="dark"] .compare-table > tbody > tr.compare-only-right > td {
    background-color: #1a3d1a !important;
    color: #6bff6b;
}

[data-theme="dark"] .compare-table > tbody > tr.compare-diff > td {
    background-color: #3d3a00 !important;
    color: #ffc107;
}

[data-theme="dark"] .compare-legend-only {
    background-color: #1a3d1a;
    border-color: #2a5d2a;
}

[data-theme="dark"] .compare-legend-diff {
    background-color: #3d3a00;
    border-color: #5d5a00;
}

[data-theme="dark"] .compare-legend-same {
    background-color: #16213e;
    border-color: #0f3460;
}

/* Dark Mode - LDIF */
[data-theme="dark"] .ldif-textarea {
    background-color: #0d1b3e;
    border-color: #0f3460;
    color: #e0e0e0;
}

/* Dark Mode - Attribute Autocomplete */
[data-theme="dark"] .attr-suggestions {
    background: #16213e;
    border-color: #0f3460;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .attr-suggestion-item {
    border-color: #0f3460;
    color: #e0e0e0;
}

[data-theme="dark"] .attr-suggestion-item:hover,
[data-theme="dark"] .attr-suggestion-item.selected {
    background: #1a3060;
}

[data-theme="dark"] .attr-suggestion-item strong {
    color: #3a86ff;
}

/* Dark Mode - Entry Editor */
[data-theme="dark"] .entry-editor {
    border-color: #0f3460;
}

[data-theme="dark"] .editor-attr-required {
    background-color: #332d00;
    border-color: #665a00;
    color: #ffc107;
}
